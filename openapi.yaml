openapi: 3.0.0
info:
  title: Agenda API
  description: API para gestión de perfiles, usuarios y servicios
  version: 1.0.0
  contact:
    name: API Support
  x-security-note: |
    - Rutas públicas: sin autenticación
    - IsUserAuth: requiere token válido en query parameter
    - IsAdmin: requiere token válido + rol "Admin"
    - IsModel: requiere token válido + rol "Model"

servers:
  - url: http://localhost:8000/api
    description: Development Server
  - url: https://api.example.com/api
    description: Production Server

paths:
  /login:
    post:
      summary: Iniciar sesión
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: user@example.com
                password:
                  type: string
                  example: password123
              required:
                - email
                - password
      responses:
        '200':
          description: Inicio de sesión exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: eyJ0eXAiOiJKV1QiLCJhbGc...
                  profile:
                    type: string
                    enum: [user, admin, model, assistant]
        '401':
          description: Credenciales inválidas
        '422':
          description: Datos de validación inválidos

  /register:
    post:
      summary: Registrar nuevo usuario (Rol Model)
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Juan Pérez
                email:
                  type: string
                  example: juan@example.com
                password:
                  type: string
                  example: password123
                password_confirmation:
                  type: string
                  example: password123
              required:
                - name
                - email
                - password
                - password_confirmation
      responses:
        '201':
          description: Usuario registrado exitosamente con rol Model
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
        '422':
          description: Datos de validación inválidos

  /me:
    get:
      summary: Obtener datos del usuario autenticado
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Authentication
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      responses:
        '200':
          description: Datos del usuario con perfil asociado
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  email:
                    type: string
                  role:
                    type: string
                    enum: [user, admin, model, assistant]
                  Persona:
                    $ref: '#/components/schemas/Person'
        '401':
          description: Token inválido o ausente

  /logout:
    post:
      summary: Cerrar sesión
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Authentication
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      responses:
        '200':
          description: Sesión cerrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: Token inválido o ausente

  /people:
    get:
      summary: Obtener perfiles con suscripción activa
      tags:
        - People
      responses:
        '200':
          description: Lista de perfiles con suscripción activa y vigente
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PersonWithMedia'

  /all_people:
    get:
      summary: Obtener todos los perfiles
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query. Retorna TODOS los perfiles sin filtro de suscripción."
      tags:
        - People
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      responses:
        '200':
          description: Lista completa de todos los perfiles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PersonWithMedia'
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin

  /people/{id}:
    get:
      summary: Obtener datos de un perfil y registrar visita
      tags:
        - People
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Datos del perfil. También registra una visita automáticamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonWithMedia'
        '404':
          description: Perfil no encontrado

    put:
      summary: Actualizar perfil
      description: Requiere autenticación (IsUserAuth). Token como parámetro query.
      tags:
        - People
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nombre:
                  type: string
                about:
                  type: string
                horario:
                  type: string
                tarifa:
                  type: string
                whatsapp:
                  type: string
                telegram:
                  type: string
                mapa:
                  type: string
              required:
                - nombre
                - about
                - horario
                - tarifa
                - whatsapp
                - telegram
                - mapa
      responses:
        '200':
          description: Perfil actualizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Person'
        '401':
          description: Token inválido o ausente
        '404':
          description: Perfil no encontrado
        '422':
          description: Datos de validación inválidos

    delete:
      summary: Eliminar perfil
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query."
      tags:
        - People
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      responses:
        '200':
          description: Perfil eliminado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '404':
          description: Perfil no encontrado

  /create:
    post:
      summary: Crear nuevo perfil
      description: Requiere autenticación (IsUserAuth). El usuario autenticado debe enviar un token válido como parámetro query.
      tags:
        - People
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación obtenido al hacer login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nombre:
                  type: string
                about:
                  type: string
                horario:
                  type: string
                tarifa:
                  type: string
                whatsapp:
                  type: string
                telegram:
                  type: string
                mapa:
                  type: string
              required:
                - nombre
                - about
                - horario
                - tarifa
                - whatsapp
                - telegram
                - mapa
      responses:
        '201':
          description: Perfil creado con tags iniciales
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonWithTags'
        '401':
          description: Token inválido o ausente
        '422':
          description: Datos de validación inválidos

  /increment/{id}:
    get:
      summary: Incrementar vistas del perfil
      tags:
        - People
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Vista incrementada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  views:
                    type: integer
        '404':
          description: Perfil no encontrado

  /upload/image/{personId}:
    post:
      summary: Subir imagen
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query."
      tags:
        - Media
      parameters:
        - name: personId
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Imagen JPG, JPEG, PNG o GIF. Máximo 2MB
      responses:
        '201':
          description: Imagen subida exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  media:
                    $ref: '#/components/schemas/Media'
        '400':
          description: Archivo inválido
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '404':
          description: Persona no encontrada

  /upload/video/{personId}:
    post:
      summary: Subir video
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query."
      tags:
        - Media
      parameters:
        - name: personId
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Video MP4, MOV, AVI o WMV. Máximo 10MB
      responses:
        '201':
          description: Video subido exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  media:
                    $ref: '#/components/schemas/Media'
        '400':
          description: Archivo inválido
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '404':
          description: Persona no encontrada

  /upload/image/{mediaId}:
    delete:
      summary: Eliminar imagen
      tags:
        - Media
      security:
        - bearerAuth: []
      parameters:
        - name: mediaId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Imagen eliminada

  /upload/video/{mediaId}:
    delete:
      summary: Eliminar video
      tags:
        - Media
      security:
        - bearerAuth: []
      parameters:
        - name: mediaId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Video eliminado

  /add-tag/{id}:
    post:
      summary: Agregar etiqueta a un perfil
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                valor:
                  type: string
                tipo:
                  type: string
              required:
                - valor
                - tipo
      responses:
        '201':
          description: Etiqueta agregada
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tag'
        '401':
          description: Token inválido o ausente
        '404':
          description: Perfil no encontrado
        '422':
          description: Datos de validación inválidos

  /update-tag/{id}:
    put:
      summary: Actualizar etiqueta
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                valor:
                  type: string
                tipo:
                  type: string
      responses:
        '200':
          description: Etiqueta actualizada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
        '401':
          description: Token inválido o ausente
        '404':
          description: Etiqueta no encontrada

  /delete-tag/{id}:
    delete:
      summary: Eliminar etiqueta
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      responses:
        '200':
          description: Etiqueta eliminada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: Token inválido o ausente
        '404':
          description: Etiqueta no encontrada

  /tags/add/{personId}:
    post:
      summary: Agregar múltiples etiquetas
      tags:
        - Tags
      security:
        - bearerAuth: []
      parameters:
        - name: personId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tags:
                  type: array
                  items:
                    type: integer
      responses:
        '201':
          description: Etiquetas agregadas

  /tags/update:
    put:
      summary: Actualizar múltiples etiquetas
      tags:
        - Tags
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tags:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
      responses:
        '200':
          description: Etiquetas actualizadas

  /tags/delete:
    delete:
      summary: Eliminar múltiples etiquetas
      tags:
        - Tags
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tag_ids:
                  type: array
                  items:
                    type: integer
      responses:
        '204':
          description: Etiquetas eliminadas

  /list_categories:
    get:
      summary: Obtener categorías disponibles
      tags:
        - Categories
      responses:
        '200':
          description: Lista de categorías
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'

  /payment_methods_list:
    get:
      summary: Obtener métodos de pago
      tags:
        - Payment
      responses:
        '200':
          description: Lista de métodos de pago
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PaymentMethod'

  /services:
    get:
      summary: Obtener servicios disponibles
      tags:
        - Services
      responses:
        '200':
          description: Lista de servicios
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'

  /subscriptions/{userId}:
    post:
      summary: Crear o extender suscripción
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query. Si la suscripción existe y está activa, extiende la fecha. Si no existe, crea una nueva."
      tags:
        - Subscriptions
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                months:
                  type: integer
                  example: 1
              required:
                - months
      responses:
        '201':
          description: Suscripción creada o extendida exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  subscription:
                    type: object
                    properties:
                      expires_at:
                        type: string
                        format: date-time
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '404':
          description: Usuario o perfil no encontrado
        '422':
          description: Datos de validación inválidos

  /subscriptions/check:
    get:
      summary: Verificar y actualizar estado de suscripciones
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query. Verifica todas las suscripciones y cambia a estado suspendido las que hayan expirado."
      tags:
        - Subscriptions
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      responses:
        '200':
          description: Verificación completada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  subscriptions_checked:
                    type: integer
                  subscriptions_updated:
                    type: integer
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin

  /profile/visit:
    post:
      summary: Registrar visita de perfil
      description: "Requiere autenticación (IsUserAuth + IsModel). Rol requerido: Model. Token como parámetro query. Registra una visita de la persona del usuario autenticado."
      tags:
        - Profile
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Model)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties: {}
      responses:
        '201':
          description: Visita registrada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Model. También si el usuario no tiene perfil válido.

  /profile/visits/last-7-days:
    get:
      summary: Obtener visitas de los últimos 7 días
      description: "Requiere autenticación (IsUserAuth + IsModel). Rol requerido: Model. Token como parámetro query."
      tags:
        - Profile
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Model)
      responses:
        '200':
          description: Visitas del período
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProfileVisit'
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Model

  /profile/visits/last-month:
    get:
      summary: Obtener visitas del último mes
      description: "Requiere autenticación (IsUserAuth + IsModel). Rol requerido: Model. Token como parámetro query."
      tags:
        - Profile
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Model)
      responses:
        '200':
          description: Visitas del período
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Model

  /profile/visits/last-3-months:
    get:
      summary: Obtener visitas de los últimos 3 meses
      description: "Requiere autenticación (IsUserAuth + IsModel). Rol requerido: Model. Token como parámetro query."
      tags:
        - Profile
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Model)
      responses:
        '200':
          description: Visitas del período
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Model

  /profile/suscription:
    get:
      summary: Obtener información de suscripción
      description: "Requiere autenticación (IsUserAuth + IsModel). Rol requerido: Model. Token como parámetro query."
      tags:
        - Profile
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Model)
      responses:
        '200':
          description: Información de suscripción
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Model

  /typeOfBody:
    get:
      summary: Obtener tipos de cuerpo
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tipos de cuerpo

  /bust:
    get:
      summary: Obtener tamaños de busto
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tamaños

  /tail:
    get:
      summary: Obtener información de cola
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de opciones

  /bioType:
    get:
      summary: Obtener tipos biológicos
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tipos

  /oralType:
    get:
      summary: Obtener tipos orales
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tipos

  /fantasyType:
    get:
      summary: Obtener tipos de fantasía
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tipos

  /typeOfMassage:
    get:
      summary: Obtener tipos de masaje
      tags:
        - Attributes
      responses:
        '200':
          description: Lista de tipos

  /virtualServices:
    get:
      summary: Obtener servicios virtuales
      tags:
        - Services
      responses:
        '200':
          description: Lista de servicios

  /additionalServices:
    get:
      summary: Obtener servicios adicionales
      tags:
        - Services
      responses:
        '200':
          description: Lista de servicios

  /ubicaciones:
    post:
      summary: Guardar ubicación
      description: "Requiere autenticación (IsUserAuth). Token como parámetro query."
      tags:
        - Location
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                latitude:
                  type: number
                longitude:
                  type: number
                accuracy:
                  type: number
      responses:
        '201':
          description: Ubicación guardada
        '401':
          description: Token inválido o ausente

  /usuarios-cerca:
    get:
      summary: Obtener usuarios cercanos
      tags:
        - Location
      parameters:
        - name: latitude
          in: query
          required: true
          schema:
            type: number
        - name: longitude
          in: query
          required: true
          schema:
            type: number
        - name: distance
          in: query
          schema:
            type: number
            default: 5
      responses:
        '200':
          description: Usuarios cercanos

  /ubicacion/{id}:
    get:
      summary: Obtener última ubicación de un usuario
      tags:
        - Location
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ubicación del usuario

  /forgot-password:
    post:
      summary: Solicitar restablecimiento de contraseña
      tags:
        - Password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
      responses:
        '200':
          description: Enlace enviado al correo

  /reset-password:
    post:
      summary: Restablecer contraseña
      tags:
        - Password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                token:
                  type: string
                password:
                  type: string
                password_confirmation:
                  type: string
      responses:
        '200':
          description: Contraseña restablecida

  /admin/register:
    post:
      summary: Registrar asistente o admin
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query."
      tags:
        - Admin
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Carlos Rodríguez
                email:
                  type: string
                  example: carlos@example.com
                password:
                  type: string
                  example: password123
                password_confirmation:
                  type: string
                  example: password123
                rol:
                  type: string
                  enum: [Admin, Assistant]
              required:
                - name
                - email
                - password
                - password_confirmation
                - rol
      responses:
        '201':
          description: Usuario registrado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  user:
                    $ref: '#/components/schemas/User'
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '422':
          description: Datos de validación inválidos

  /admin/delete/{id}:
    delete:
      summary: Eliminar usuario
      description: "Requiere autenticación (IsUserAuth + IsAdmin). Rol requerido: Admin. Token como parámetro query."
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Token de autenticación (usuario Admin)
      responses:
        '200':
          description: Usuario eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: Token inválido o ausente
        '403':
          description: No autorizado. Se requiere rol Admin
        '404':
          description: Usuario no encontrado

components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
        role:
          type: string
          enum: [user, admin, model, assistant]
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    UserRegister:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
        password:
          type: string
        password_confirmation:
          type: string
        phone:
          type: string
      required:
        - name
        - email
        - password
        - password_confirmation

    Person:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        nombre:
          type: string
        about:
          type: string
        horario:
          type: string
        tarifa:
          type: string
        whatsapp:
          type: string
        telegram:
          type: string
        mapa:
          type: string
        is_visible:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    PersonWithMedia:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        nombre:
          type: string
        about:
          type: string
        horario:
          type: string
        tarifa:
          type: string
        whatsapp:
          type: string
        telegram:
          type: string
        mapa:
          type: string
        is_visible:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        media:
          type: array
          items:
            $ref: '#/components/schemas/Media'

    PersonWithTags:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        nombre:
          type: string
        about:
          type: string
        horario:
          type: string
        tarifa:
          type: string
        whatsapp:
          type: string
        telegram:
          type: string
        mapa:
          type: string
        is_visible:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'

    PersonCreate:
      type: object
      properties:
        name:
          type: string
        age:
          type: integer
        bio:
          type: string
        visibility:
          type: string
          enum: [public, private]
        category_id:
          type: integer
        phone:
          type: string
      required:
        - name
        - age

    PersonUpdate:
      type: object
      properties:
        name:
          type: string
        age:
          type: integer
        bio:
          type: string
        visibility:
          type: string

    Category:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string

    Tag:
      type: object
      properties:
        id:
          type: integer
        person_id:
          type: integer
        tipo:
          type: string
          example: about_me
        valor:
          type: string
          example: Soy una persona amable y divertida
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Media:
      type: object
      properties:
        id:
          type: integer
        person_id:
          type: integer
        type:
          type: string
          enum: [image, video]
        file_path:
          type: string
          example: storage/images/uuid.jpg
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    PaymentMethod:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string

    Service:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
        price:
          type: number

    Subscription:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        expires_at:
          type: string
          format: date-time
        status:
          type: integer
          example: 1
          description: 1=activa, 3=suspendida por pago
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    ProfileVisit:
      type: object
      properties:
        id:
          type: integer
        profile_id:
          type: integer
        created_at:
          type: string
          format: date-time

    Pagination:
      type: object
      properties:
        current_page:
          type: integer
        per_page:
          type: integer
        total:
          type: integer
        last_page:
          type: integer

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
